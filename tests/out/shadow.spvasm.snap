---
source: tests/snapshots.rs
expression: dis
---
; SPIR-V
; Version: 1.2
; Generator: rspirv
; Bound: 219
OpCapability Shader
%1 = OpExtInstImport "GLSL.std.450"
OpMemoryModel Logical GLSL450
OpEntryPoint Fragment %63 "fs_main" %112 %105 %215
OpExecutionMode %63 OriginUpperLeft
OpSource GLSL 450
OpName %9 "c_ambient"
OpName %11 "c_max_lights"
OpName %18 "fetch_shadow"
OpName %27 "t_shadow"
OpName %32 "sampler_shadow"
OpName %59 "color"
OpName %61 "i"
OpName %63 "fs_main"
OpName %75 "Globals"
OpMemberName %75 0 "num_lights"
OpName %76 "u_globals"
OpName %91 "Light"
OpMemberName %91 0 "proj"
OpMemberName %91 1 "pos"
OpMemberName %91 2 "color"
OpName %95 "Lights"
OpMemberName %95 0 "data"
OpName %96 "s_lights"
OpName %105 "in_position_fs"
OpName %112 "in_normal_fs"
OpName %215 "out_color_fs"
OpName %63 "fs_main"
OpDecorate %27 DescriptorSet 0
OpDecorate %27 Binding 2
OpDecorate %32 DescriptorSet 0
OpDecorate %32 Binding 3
OpDecorate %75 Block
OpMemberDecorate %75 0 Offset 0
OpDecorate %76 DescriptorSet 0
OpDecorate %76 Binding 0
OpMemberDecorate %91 0 Offset 0
OpMemberDecorate %91 0 ColMajor
OpMemberDecorate %91 0 MatrixStride 16
OpMemberDecorate %91 1 Offset 64
OpMemberDecorate %91 2 Offset 80
OpDecorate %93 ArrayStride 96
OpDecorate %95 BufferBlock
OpMemberDecorate %95 0 Offset 0
OpDecorate %96 NonWritable
OpDecorate %96 DescriptorSet 0
OpDecorate %96 Binding 1
OpDecorate %105 Location 1
OpDecorate %112 Location 0
OpDecorate %215 Location 0
%2 = OpTypeVoid
%4 = OpTypeFloat 32
%3 = OpConstant  %4  0.0
%5 = OpConstant  %4  1.0
%6 = OpConstant  %4  0.5
%7 = OpConstant  %4  -0.5
%8 = OpConstant  %4  0.05
%10 = OpTypeVector %4 3
%9 = OpConstantComposite  %10  %8 %8 %8
%12 = OpTypeInt 32 0
%11 = OpConstant  %12  10
%13 = OpConstant  %12  0
%14 = OpConstant  %12  1
%17 = OpTypeVector %4 4
%19 = OpTypeFunction %4 %12 %17
%21 = OpTypeBool
%26 = OpTypeImage %4 2D 1 1 0 1 Unknown
%28 = OpTypePointer UniformConstant %26
%27 = OpVariable  %28  UniformConstant
%30 = OpTypeSampledImage %26
%31 = OpTypeSampler
%33 = OpTypePointer UniformConstant %31
%32 = OpVariable  %33  UniformConstant
%35 = OpTypeVector %4 2
%49 = OpTypeInt 32 1
%58 = OpConstant  %4  0.0
%60 = OpTypePointer Function %10
%62 = OpTypePointer Function %12
%64 = OpTypeFunction %2
%73 = OpTypeVector %12 4
%75 = OpTypeStruct %73
%77 = OpTypePointer Uniform %75
%76 = OpVariable  %77  Uniform
%78 = OpTypePointer Uniform %73
%79 = OpConstant  %49  0
%80 = OpTypePointer Uniform %12
%81 = OpConstant  %49  0
%89 = OpTypeMatrix %17 4
%91 = OpTypeStruct %89 %17 %17
%93 = OpTypeRuntimeArray %91
%95 = OpTypeStruct %93
%97 = OpTypePointer Uniform %95
%96 = OpVariable  %97  Uniform
%98 = OpTypePointer Uniform %93
%99 = OpConstant  %49  0
%101 = OpTypePointer Uniform %91
%102 = OpTypePointer Uniform %89
%103 = OpConstant  %49  0
%106 = OpTypePointer Input %17
%105 = OpVariable  %106  Input
%113 = OpTypePointer Input %10
%112 = OpVariable  %113  Input
%121 = OpTypePointer Uniform %93
%122 = OpConstant  %49  0
%124 = OpTypePointer Uniform %91
%125 = OpTypePointer Uniform %17
%126 = OpConstant  %49  1
%127 = OpTypePointer Uniform %4
%128 = OpConstant  %49  0
%134 = OpTypePointer Uniform %93
%135 = OpConstant  %49  0
%137 = OpTypePointer Uniform %91
%138 = OpTypePointer Uniform %17
%139 = OpConstant  %49  1
%140 = OpTypePointer Uniform %4
%141 = OpConstant  %49  1
%147 = OpTypePointer Uniform %93
%148 = OpConstant  %49  0
%150 = OpTypePointer Uniform %91
%151 = OpTypePointer Uniform %17
%152 = OpConstant  %49  1
%153 = OpTypePointer Uniform %4
%154 = OpConstant  %49  2
%158 = OpTypePointer Input %4
%159 = OpConstant  %49  0
%162 = OpTypePointer Input %4
%163 = OpConstant  %49  1
%166 = OpTypePointer Input %4
%167 = OpConstant  %49  2
%177 = OpTypePointer Uniform %93
%178 = OpConstant  %49  0
%180 = OpTypePointer Uniform %91
%181 = OpTypePointer Uniform %17
%182 = OpConstant  %49  2
%183 = OpTypePointer Uniform %4
%184 = OpConstant  %49  0
%190 = OpTypePointer Uniform %93
%191 = OpConstant  %49  0
%193 = OpTypePointer Uniform %91
%194 = OpTypePointer Uniform %17
%195 = OpConstant  %49  2
%196 = OpTypePointer Uniform %4
%197 = OpConstant  %49  1
%203 = OpTypePointer Uniform %93
%204 = OpConstant  %49  0
%206 = OpTypePointer Uniform %91
%207 = OpTypePointer Uniform %17
%208 = OpConstant  %49  2
%209 = OpTypePointer Uniform %4
%210 = OpConstant  %49  2
%216 = OpTypePointer Output %17
%215 = OpVariable  %216  Output
%18 = OpFunction  %4  None %19
%15 = OpFunctionParameter  %12
%16 = OpFunctionParameter  %17
%20 = OpLabel
%23 = OpCompositeExtract  %4  %16 3
%22 = OpFOrdLessThanEqual  %21  %23 %3
OpSelectionMerge %24 None
OpBranchConditional %22 %25 %24
%25 = OpLabel
OpReturnValue %5
%24 = OpLabel
%29 = OpLoad  %26  %27
%34 = OpLoad  %31  %32
%39 = OpCompositeExtract  %4  %16 0
%40 = OpCompositeExtract  %4  %16 1
%41 = OpCompositeConstruct  %35  %39 %40
%42 = OpCompositeConstruct  %35  %6 %7
%38 = OpFMul  %35  %41 %42
%44 = OpCompositeExtract  %4  %16 3
%43 = OpFDiv  %4  %5 %44
%37 = OpVectorTimesScalar  %35  %38 %43
%45 = OpCompositeConstruct  %35  %6 %6
%36 = OpFAdd  %35  %37 %45
%46 = OpCompositeExtract  %4  %36 0
%47 = OpCompositeExtract  %4  %36 1
%50 = OpBitcast  %49  %15
%48 = OpConvertUToF  %4  %50
%51 = OpCompositeConstruct  %10  %46 %47 %48
%52 = OpSampledImage  %30  %29 %34
%55 = OpCompositeExtract  %4  %16 2
%57 = OpCompositeExtract  %4  %16 3
%56 = OpFDiv  %4  %5 %57
%54 = OpFMul  %4  %55 %56
%53 = OpImageSampleDrefExplicitLod  %4  %52 %51 %54 Lod %58
OpReturnValue %53
OpFunctionEnd
%63 = OpFunction  %2  None %64
%65 = OpLabel
%59 = OpVariable  %60  Function %9
%61 = OpVariable  %62  Function %13
OpBranch %66
%66 = OpLabel
OpLoopMerge %67 %69 None
OpBranch %68
%68 = OpLabel
%71 = OpLoad  %12  %61
%74 = OpAccessChain  %78  %76 %79
%72 = OpAccessChain  %80  %74 %81
%82 = OpLoad  %12  %72
%83 = OpExtInst  %12  %1 UMin %82 %11
%70 = OpUGreaterThanEqual  %21  %71 %83
OpSelectionMerge %84 None
OpBranchConditional %70 %85 %84
%85 = OpLabel
OpBranch %67
%84 = OpLabel
%87 = OpLoad  %12  %61
%94 = OpAccessChain  %98  %96 %99
%100 = OpLoad  %12  %61
%92 = OpAccessChain  %101  %94 %100
%90 = OpAccessChain  %102  %92 %103
%104 = OpLoad  %89  %90
%107 = OpLoad  %17  %105
%88 = OpMatrixTimesVector  %17  %104 %107
%86 = OpFunctionCall  %4  %18 %87 %88
%109 = OpLoad  %10  %59
%114 = OpLoad  %10  %112
%115 = OpExtInst  %10  %1 Normalize %114
%120 = OpAccessChain  %121  %96 %122
%123 = OpLoad  %12  %61
%119 = OpAccessChain  %124  %120 %123
%118 = OpAccessChain  %125  %119 %126
%117 = OpAccessChain  %127  %118 %128
%129 = OpLoad  %4  %117
%133 = OpAccessChain  %134  %96 %135
%136 = OpLoad  %12  %61
%132 = OpAccessChain  %137  %133 %136
%131 = OpAccessChain  %138  %132 %139
%130 = OpAccessChain  %140  %131 %141
%142 = OpLoad  %4  %130
%146 = OpAccessChain  %147  %96 %148
%149 = OpLoad  %12  %61
%145 = OpAccessChain  %150  %146 %149
%144 = OpAccessChain  %151  %145 %152
%143 = OpAccessChain  %153  %144 %154
%155 = OpLoad  %4  %143
%156 = OpCompositeConstruct  %10  %129 %142 %155
%157 = OpAccessChain  %158  %105 %159
%160 = OpLoad  %4  %157
%161 = OpAccessChain  %162  %105 %163
%164 = OpLoad  %4  %161
%165 = OpAccessChain  %166  %105 %167
%168 = OpLoad  %4  %165
%169 = OpCompositeConstruct  %10  %160 %164 %168
%116 = OpFSub  %10  %156 %169
%170 = OpExtInst  %10  %1 Normalize %116
%171 = OpDot  %4  %115 %170
%172 = OpExtInst  %4  %1 FMax %3 %171
%111 = OpFMul  %4  %86 %172
%176 = OpAccessChain  %177  %96 %178
%179 = OpLoad  %12  %61
%175 = OpAccessChain  %180  %176 %179
%174 = OpAccessChain  %181  %175 %182
%173 = OpAccessChain  %183  %174 %184
%185 = OpLoad  %4  %173
%189 = OpAccessChain  %190  %96 %191
%192 = OpLoad  %12  %61
%188 = OpAccessChain  %193  %189 %192
%187 = OpAccessChain  %194  %188 %195
%186 = OpAccessChain  %196  %187 %197
%198 = OpLoad  %4  %186
%202 = OpAccessChain  %203  %96 %204
%205 = OpLoad  %12  %61
%201 = OpAccessChain  %206  %202 %205
%200 = OpAccessChain  %207  %201 %208
%199 = OpAccessChain  %209  %200 %210
%211 = OpLoad  %4  %199
%212 = OpCompositeConstruct  %10  %185 %198 %211
%110 = OpVectorTimesScalar  %10  %212 %111
%108 = OpFAdd  %10  %109 %110
OpStore %59 %108
OpBranch %69
%69 = OpLabel
%214 = OpLoad  %12  %61
%213 = OpIAdd  %12  %214 %14
OpStore %61 %213
OpBranch %66
%67 = OpLabel
%217 = OpLoad  %10  %59
%218 = OpCompositeConstruct  %17  %217 %5
OpStore %215 %218
OpReturn
OpFunctionEnd
