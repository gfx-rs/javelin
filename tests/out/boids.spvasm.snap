---
source: tests/snapshots.rs
expression: dis
---
; SPIR-V
; Version: 1.0
; Generator: rspirv
; Bound: 233
OpCapability Shader
%1 = OpExtInstImport "GLSL.std.450"
OpMemoryModel Logical GLSL450
OpEntryPoint GLCompute %41 "main" %25
OpExecutionMode %41 LocalSize 64 1 1
OpSource GLSL 450
OpName %3 "NUM_PARTICLES"
OpName %16 "SimParams"
OpMemberName %16 0 "deltaT"
OpMemberName %16 1 "rule1Distance"
OpMemberName %16 2 "rule2Distance"
OpMemberName %16 3 "rule3Distance"
OpMemberName %16 4 "rule1Scale"
OpMemberName %16 5 "rule2Scale"
OpMemberName %16 6 "rule3Scale"
OpName %15 "params"
OpName %19 "Particles"
OpMemberName %19 0 "particles"
OpName %21 "Particle"
OpMemberName %21 0 "pos"
OpMemberName %21 1 "vel"
OpName %18 "particlesSrc"
OpName %24 "particlesDst"
OpName %25 "gl_GlobalInvocationID"
OpName %28 "vPos"
OpName %30 "vVel"
OpName %31 "cMass"
OpName %32 "cVel"
OpName %33 "colVel"
OpName %34 "cMassCount"
OpName %36 "cVelCount"
OpName %37 "pos"
OpName %38 "vel"
OpName %39 "i"
OpName %41 "main"
OpName %41 "main"
OpDecorate %16 Block
OpMemberDecorate %16 0 Offset 0
OpMemberDecorate %16 1 Offset 4
OpMemberDecorate %16 2 Offset 8
OpMemberDecorate %16 3 Offset 12
OpMemberDecorate %16 4 Offset 16
OpMemberDecorate %16 5 Offset 20
OpMemberDecorate %16 6 Offset 24
OpDecorate %15 DescriptorSet 0
OpDecorate %15 Binding 0
OpDecorate %19 BufferBlock
OpMemberDecorate %19 0 Offset 0
OpDecorate %20 ArrayStride 16
OpMemberDecorate %21 0 Offset 0
OpMemberDecorate %21 1 Offset 8
OpDecorate %18 NonWritable
OpDecorate %18 DescriptorSet 0
OpDecorate %18 Binding 1
OpDecorate %24 DescriptorSet 0
OpDecorate %24 Binding 2
OpDecorate %25 BuiltIn GlobalInvocationId
%2 = OpTypeVoid
%4 = OpTypeInt 32 1
%3 = OpConstant  %4  1500
%6 = OpTypeFloat 32
%5 = OpConstant  %6  0.0
%7 = OpConstant  %4  0
%9 = OpTypeInt 32 0
%8 = OpConstant  %9  0
%10 = OpConstant  %4  1
%11 = OpConstant  %9  1
%12 = OpConstant  %6  1.0
%13 = OpConstant  %6  0.1
%14 = OpConstant  %6  -1.0
%16 = OpTypeStruct %6 %6 %6 %6 %6 %6 %6
%17 = OpTypePointer Uniform %16
%15 = OpVariable  %17  Uniform
%22 = OpTypeVector %6 2
%21 = OpTypeStruct %22 %22
%20 = OpTypeRuntimeArray %21
%19 = OpTypeStruct %20
%23 = OpTypePointer Uniform %19
%18 = OpVariable  %23  Uniform
%24 = OpVariable  %23  Uniform
%26 = OpTypeVector %9 3
%27 = OpTypePointer Input %26
%25 = OpVariable  %27  Input
%29 = OpTypePointer Function %22
%35 = OpTypePointer Function %4
%40 = OpTypePointer Function %9
%42 = OpTypeFunction %2
%47 = OpTypeBool
%51 = OpConstant  %4  0
%52 = OpConstant  %4  0
%54 = OpTypePointer Uniform %22
%56 = OpConstant  %4  1
%57 = OpConstant  %4  0
%59 = OpTypePointer Uniform %22
%77 = OpConstant  %4  0
%78 = OpConstant  %4  0
%80 = OpTypePointer Uniform %22
%83 = OpConstant  %4  1
%84 = OpConstant  %4  0
%86 = OpTypePointer Uniform %22
%91 = OpConstant  %4  1
%93 = OpTypePointer Uniform %6
%106 = OpConstant  %4  2
%108 = OpTypePointer Uniform %6
%121 = OpConstant  %4  3
%123 = OpTypePointer Uniform %6
%157 = OpConstant  %4  4
%159 = OpTypePointer Uniform %6
%164 = OpConstant  %4  5
%166 = OpTypePointer Uniform %6
%171 = OpConstant  %4  6
%173 = OpTypePointer Uniform %6
%185 = OpConstant  %4  0
%187 = OpTypePointer Uniform %6
%196 = OpConstant  %4  0
%198 = OpTypePointer Function %6
%204 = OpConstant  %4  0
%206 = OpTypePointer Function %6
%212 = OpConstant  %4  1
%214 = OpTypePointer Function %6
%220 = OpConstant  %4  1
%222 = OpTypePointer Function %6
%224 = OpConstant  %4  0
%225 = OpConstant  %4  0
%227 = OpTypePointer Uniform %22
%229 = OpConstant  %4  1
%230 = OpConstant  %4  0
%232 = OpTypePointer Uniform %22
%41 = OpFunction  %2  None %42
%43 = OpLabel
%39 = OpVariable  %40  Function %8
%36 = OpVariable  %35  Function %7
%32 = OpVariable  %29  Function
%28 = OpVariable  %29  Function
%37 = OpVariable  %29  Function
%33 = OpVariable  %29  Function
%30 = OpVariable  %29  Function
%38 = OpVariable  %29  Function
%34 = OpVariable  %35  Function %7
%31 = OpVariable  %29  Function
OpBranch %44
%44 = OpLabel
%45 = OpLoad  %26  %25
%46 = OpCompositeExtract  %9  %45 0
%48 = OpUGreaterThanEqual  %47  %46 %3
OpSelectionMerge %49 None
OpBranchConditional %48 %50 %49
%50 = OpLabel
OpReturn
%49 = OpLabel
%53 = OpAccessChain  %54  %18 %52 %46 %51
%55 = OpLoad  %22  %53
OpStore %28 %55
%58 = OpAccessChain  %59  %18 %57 %46 %56
%60 = OpLoad  %22  %58
OpStore %30 %60
%61 = OpCompositeConstruct  %22  %5 %5
OpStore %31 %61
%62 = OpCompositeConstruct  %22  %5 %5
OpStore %32 %62
%63 = OpCompositeConstruct  %22  %5 %5
OpStore %33 %63
OpBranch %64
%64 = OpLabel
OpLoopMerge %65 %67 None
OpBranch %66
%66 = OpLabel
%68 = OpLoad  %9  %39
%69 = OpUGreaterThanEqual  %47  %68 %3
OpSelectionMerge %70 None
OpBranchConditional %69 %71 %70
%71 = OpLabel
OpBranch %65
%70 = OpLabel
%72 = OpLoad  %9  %39
%73 = OpIEqual  %47  %72 %46
OpSelectionMerge %74 None
OpBranchConditional %73 %75 %74
%75 = OpLabel
OpBranch %67
%74 = OpLabel
%76 = OpLoad  %9  %39
%79 = OpAccessChain  %80  %18 %78 %76 %77
%81 = OpLoad  %22  %79
OpStore %37 %81
%82 = OpLoad  %9  %39
%85 = OpAccessChain  %86  %18 %84 %82 %83
%87 = OpLoad  %22  %85
OpStore %38 %87
%88 = OpLoad  %22  %37
%89 = OpLoad  %22  %28
%90 = OpExtInst  %6  %1 Distance %88 %89
%92 = OpAccessChain  %93  %15 %91
%94 = OpLoad  %6  %92
%95 = OpFOrdLessThan  %47  %90 %94
OpSelectionMerge %96 None
OpBranchConditional %95 %97 %96
%97 = OpLabel
%98 = OpLoad  %22  %31
%99 = OpLoad  %22  %37
%100 = OpFAdd  %22  %98 %99
OpStore %31 %100
%101 = OpLoad  %4  %34
%102 = OpIAdd  %4  %101 %10
OpStore %34 %102
OpBranch %96
%96 = OpLabel
%103 = OpLoad  %22  %37
%104 = OpLoad  %22  %28
%105 = OpExtInst  %6  %1 Distance %103 %104
%107 = OpAccessChain  %108  %15 %106
%109 = OpLoad  %6  %107
%110 = OpFOrdLessThan  %47  %105 %109
OpSelectionMerge %111 None
OpBranchConditional %110 %112 %111
%112 = OpLabel
%113 = OpLoad  %22  %33
%114 = OpLoad  %22  %37
%115 = OpLoad  %22  %28
%116 = OpFSub  %22  %114 %115
%117 = OpFSub  %22  %113 %116
OpStore %33 %117
OpBranch %111
%111 = OpLabel
%118 = OpLoad  %22  %37
%119 = OpLoad  %22  %28
%120 = OpExtInst  %6  %1 Distance %118 %119
%122 = OpAccessChain  %123  %15 %121
%124 = OpLoad  %6  %122
%125 = OpFOrdLessThan  %47  %120 %124
OpSelectionMerge %126 None
OpBranchConditional %125 %127 %126
%127 = OpLabel
%128 = OpLoad  %22  %32
%129 = OpLoad  %22  %38
%130 = OpFAdd  %22  %128 %129
OpStore %32 %130
%131 = OpLoad  %4  %36
%132 = OpIAdd  %4  %131 %10
OpStore %36 %132
OpBranch %126
%126 = OpLabel
OpBranch %67
%67 = OpLabel
%133 = OpLoad  %9  %39
%134 = OpIAdd  %9  %133 %11
OpStore %39 %134
OpBranch %64
%65 = OpLabel
%135 = OpLoad  %4  %34
%136 = OpSGreaterThan  %47  %135 %7
OpSelectionMerge %137 None
OpBranchConditional %136 %138 %137
%138 = OpLabel
%139 = OpLoad  %22  %31
%140 = OpLoad  %4  %34
%141 = OpConvertSToF  %6  %140
%142 = OpFDiv  %6  %12 %141
%143 = OpVectorTimesScalar  %22  %139 %142
%144 = OpLoad  %22  %28
%145 = OpFSub  %22  %143 %144
OpStore %31 %145
OpBranch %137
%137 = OpLabel
%146 = OpLoad  %4  %36
%147 = OpSGreaterThan  %47  %146 %7
OpSelectionMerge %148 None
OpBranchConditional %147 %149 %148
%149 = OpLabel
%150 = OpLoad  %22  %32
%151 = OpLoad  %4  %36
%152 = OpConvertSToF  %6  %151
%153 = OpFDiv  %6  %12 %152
%154 = OpVectorTimesScalar  %22  %150 %153
OpStore %32 %154
OpBranch %148
%148 = OpLabel
%155 = OpLoad  %22  %30
%156 = OpLoad  %22  %31
%158 = OpAccessChain  %159  %15 %157
%160 = OpLoad  %6  %158
%161 = OpVectorTimesScalar  %22  %156 %160
%162 = OpFAdd  %22  %155 %161
%163 = OpLoad  %22  %33
%165 = OpAccessChain  %166  %15 %164
%167 = OpLoad  %6  %165
%168 = OpVectorTimesScalar  %22  %163 %167
%169 = OpFAdd  %22  %162 %168
%170 = OpLoad  %22  %32
%172 = OpAccessChain  %173  %15 %171
%174 = OpLoad  %6  %172
%175 = OpVectorTimesScalar  %22  %170 %174
%176 = OpFAdd  %22  %169 %175
OpStore %30 %176
%177 = OpLoad  %22  %30
%178 = OpExtInst  %22  %1 Normalize %177
%179 = OpLoad  %22  %30
%180 = OpExtInst  %6  %1 Length %179
%181 = OpExtInst  %6  %1 FClamp %180 %5 %13
%182 = OpVectorTimesScalar  %22  %178 %181
OpStore %30 %182
%183 = OpLoad  %22  %28
%184 = OpLoad  %22  %30
%186 = OpAccessChain  %187  %15 %185
%188 = OpLoad  %6  %186
%189 = OpVectorTimesScalar  %22  %184 %188
%190 = OpFAdd  %22  %183 %189
OpStore %28 %190
%191 = OpLoad  %22  %28
%192 = OpCompositeExtract  %6  %191 0
%193 = OpFOrdLessThan  %47  %192 %14
OpSelectionMerge %194 None
OpBranchConditional %193 %195 %194
%195 = OpLabel
%197 = OpAccessChain  %198  %28 %196
OpStore %197 %12
OpBranch %194
%194 = OpLabel
%199 = OpLoad  %22  %28
%200 = OpCompositeExtract  %6  %199 0
%201 = OpFOrdGreaterThan  %47  %200 %12
OpSelectionMerge %202 None
OpBranchConditional %201 %203 %202
%203 = OpLabel
%205 = OpAccessChain  %206  %28 %204
OpStore %205 %14
OpBranch %202
%202 = OpLabel
%207 = OpLoad  %22  %28
%208 = OpCompositeExtract  %6  %207 1
%209 = OpFOrdLessThan  %47  %208 %14
OpSelectionMerge %210 None
OpBranchConditional %209 %211 %210
%211 = OpLabel
%213 = OpAccessChain  %214  %28 %212
OpStore %213 %12
OpBranch %210
%210 = OpLabel
%215 = OpLoad  %22  %28
%216 = OpCompositeExtract  %6  %215 1
%217 = OpFOrdGreaterThan  %47  %216 %12
OpSelectionMerge %218 None
OpBranchConditional %217 %219 %218
%219 = OpLabel
%221 = OpAccessChain  %222  %28 %220
OpStore %221 %14
OpBranch %218
%218 = OpLabel
%223 = OpLoad  %22  %28
%226 = OpAccessChain  %227  %24 %225 %46 %224
OpStore %226 %223
%228 = OpLoad  %22  %30
%231 = OpAccessChain  %232  %24 %230 %46 %229
OpStore %231 %228
OpReturn
OpFunctionEnd
